<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- newrelic browser agent. REMEMBER TO REPLACE THIS SCRIPT WITH YOUR OWN BROWSER AGENT -->
    <script src="agent.js"></script>

    <!-- newrelic tracker -->
    <script src="../dist/newrelic-video-dash.min.js"></script>

    <!-- dash.js -->
    <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
  </head>
  <body>
    <video
      id="myPlayer"
      width="640"
      height="480"
      crossorigin="anonymous"
      controls
    ></video>
    <script>
      function initPlayer() {
        // Find the video element.
        var video = document.getElementById("myPlayer");

        // autoplay is disabled

        video.autoplay = false;

        // Initialize the Dash.js player
        var player = dashjs.MediaPlayer().create();
        player.events = dashjs.MediaPlayer.events;

        nrvideo.Core.addTracker(new nrvideo.DashTracker(player));

        window.player = player;

        player.initialize(
          video,
          "https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd",
          false
        );

        // player.initialize(
        //   video,
        //   "https://refapp.hbbtv.org/videos/multiperiod_v8.php?drm=0&advert=1&emsg=0&video=v1,v2,v3&audiolang=eng,fin&sublang=eng,fin,swe&mup=2&spd=8",
        //   true
        // );

        console.log("palyBackRate", player.getPlaybackRate());
        console.log("liveLatency", player.getCurrentLiveLatency());
      }
      document.addEventListener("DOMContentLoaded", initPlayer);
    </script>
  </body>
</html>
